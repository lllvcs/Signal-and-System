function [ret,x0,str,ts,xts]=chou(t,x,u,flag);
%CHOU	is the M-file description of the SIMULINK system named CHOU.
%	The block-diagram can be displayed by typing: CHOU.
%
%	SYS=CHOU(T,X,U,FLAG) returns depending on FLAG certain
%	system values given time point, T, current state vector, X,
%	and input vector, U.
%	FLAG is used to indicate the type of output to be returned in SYS.
%
%	Setting FLAG=1 causes CHOU to return state derivatives, FLAG=2
%	discrete states, FLAG=3 system outputs and FLAG=4 next sample
%	time. For more information and other options see SFUNC.
%
%	Calling CHOU with a FLAG of zero:
%	[SIZES]=CHOU([],[],[],0),  returns a vector, SIZES, which
%	contains the sizes of the state vector and other parameters.
%		SIZES(1) number of states
%		SIZES(2) number of discrete states
%		SIZES(3) number of outputs
%		SIZES(4) number of inputs
%		SIZES(5) number of roots (currently unsupported)
%		SIZES(6) direct feedthrough flag
%		SIZES(7) number of sample times
%
%	For the definition of other parameters in SIZES, see SFUNC.
%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.

% Note: This M-file is only used for saving graphical information;
%       after the model is loaded into memory an internal model
%       representation is used.

% the system will take on the name of this mfile:
sys = mfilename;
new_system(sys)
simver(1.3)
if (0 == (nargin + nargout))
     set_param(sys,'Location',[4,42,623,456])
     open_system(sys)
end;
set_param(sys,'algorithm',     'RK-45')
set_param(sys,'Start time',    '0.0')
set_param(sys,'Stop time',     '9999')
set_param(sys,'Min step size', '0.000000001')
set_param(sys,'Max step size', '0.001')
set_param(sys,'Relative error','1e-5')
set_param(sys,'Return vars',   '')

add_block('built-in/Note',[sys,'/','连续时间抽样实验'])
set_param([sys,'/','连续时间抽样实验'],...
		'Font Name','黑体',...
		'Font Angle','italic',...
		'Font Size',15,...
		'position',[125,25,130,30])


%     Subsystem  ['抽样脉冲',13,'（抽样函数）'].

new_system([sys,'/',['抽样脉冲',13,'（抽样函数）']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],'Location',[158,441,759,682])

add_block('built-in/Outport',[sys,'/',['抽样脉冲',13,'（抽样函数）/out_1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/out_1']],...
		'hide name',0,...
		'position',[560,105,580,125])

add_block('built-in/Gain',[sys,'/',['抽样脉冲',13,'（抽样函数）/Gain']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Gain']],...
		'hide name',0,...
		'Gain','ht',...
		'position',[510,102,535,128])

add_block('built-in/Product',[sys,'/',['抽样脉冲',13,'（抽样函数）/Product']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Product']],...
		'hide name',0,...
		'position',[455,105,480,125])

add_block('built-in/Logical Operator',[sys,'/',['抽样脉冲',13,'（抽样函数）/Logical',13,'Operator1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Logical',13,'Operator1']],...
		'Operator','NOT',...
		'Number of Input Ports','1',...
		'position',[355,38,385,62])

add_block('built-in/Logical Operator',[sys,'/',['抽样脉冲',13,'（抽样函数）/Logical',13,'Operator']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Logical',13,'Operator']],...
		'Operator','XOR',...
		'position',[285,38,315,62])

add_block('built-in/Constant',[sys,'/',['抽样脉冲',13,'（抽样函数）/Constant1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Constant1']],...
		'Value','stt',...
		'position',[295,149,320,171])

add_block('built-in/Clock',[sys,'/',['抽样脉冲',13,'（抽样函数）/Clock1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Clock1']],...
		'hide name',0,...
		'position',[295,100,315,120])

add_block('built-in/Relational Operator',[sys,'/',['抽样脉冲',13,'（抽样函数）/Relational',13,'operator']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Relational',13,'operator']],...
		'hide name',0,...
		'position',[370,102,400,133])

add_block('built-in/Sum',[sys,'/',['抽样脉冲',13,'（抽样函数）/Sum1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Sum1']],...
		'hide name',0,...
		'inputs','+-',...
		'position',[130,120,150,140])

add_block('built-in/Sum',[sys,'/',['抽样脉冲',13,'（抽样函数）/Sum']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Sum']],...
		'hide name',0,...
		'inputs','+-',...
		'position',[135,35,155,55])

add_block('built-in/Constant',[sys,'/',['抽样脉冲',13,'（抽样函数）/Constant']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Constant']],...
		'position',[25,30,45,50])

add_block('built-in/Unit Delay',[sys,'/',['抽样脉冲',13,'（抽样函数）/Unit Delay']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Unit Delay']],...
		'orientation',2,...
		'Sample time','[Ts,st1]',...
		'position',[145,75,195,95])

add_block('built-in/Unit Delay',[sys,'/',['抽样脉冲',13,'（抽样函数）/Unit Delay1']])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）/Unit Delay1']],...
		'orientation',2,...
		'Sample time','[Ts,st2]',...
		'x0','ini',...
		'position',[140,165,190,185])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[390,50;430,50;430,110;450,110])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[320,50;350,50])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[325,160;345,160;345,125;365,125])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[540,115;555,115])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[485,115;505,115])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[405,120;450,120])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[320,110;365,110])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[140,85;105,85;105,50;130,50])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[160,45;230,45;230,85;200,85])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[50,40;130,40])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[155,130;210,130;210,175;195,175])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[135,175;100,175;100,135;125,135])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[50,40;70,40;70,125;125,125])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[160,45;280,45])
add_line([sys,'/',['抽样脉冲',13,'（抽样函数）']],[155,130;245,130;245,55;280,55])
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Mask Display','plot(0,0,100,100,[90,75,75,60,60,35,35,20,20,10],[20,20,80,80,20,20,80,80,20,20])',...
		'Mask Type','Pulse Generator')
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Mask Dialogue','Pulse Generator.|Pulse period (secs):|Pulse width:|Pulse height:|Pulse start time:')
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Mask Translate','Ts=@1; du=@2; ht=@3; stt=@4; ini=ones(length(ht),1); st1=rem(stt,Ts); st2=rem(stt+du,Ts);if(Ts<=1.2*du),ini=zeros(length(ht),1);end;')
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Mask Help','Pulse generator which ensures pulse\ntransitions are hit. Provides a vector of pulses when the height is entered as a vector.\nUnmask to see how it works.')
set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Mask Entries','pi/100\/0.001\/5\/0.0005\/')


%     Finished composite block ['抽样脉冲',13,'（抽样函数）'].

set_param([sys,'/',['抽样脉冲',13,'（抽样函数）']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'position',[55,257,100,293])


%     Subsystem  '乘法器'.

new_system([sys,'/','乘法器'])
set_param([sys,'/','乘法器'],'Location',[33,479,253,634])

add_block('built-in/Product',[sys,'/','乘法器/Product'])
set_param([sys,'/','乘法器/Product'],...
		'position',[65,55,90,75])

add_block('built-in/Sum',[sys,'/','乘法器/Sum'])
set_param([sys,'/','乘法器/Sum'],...
		'inputs','+',...
		'position',[125,55,145,75])

add_block('built-in/Outport',[sys,'/','乘法器/out_1'])
set_param([sys,'/','乘法器/out_1'],...
		'position',[185,55,205,75])

add_block('built-in/Inport',[sys,'/','乘法器/in_2'])
set_param([sys,'/','乘法器/in_2'],...
		'Port','2',...
		'position',[15,90,35,110])

add_block('built-in/Inport',[sys,'/','乘法器/in_1'])
set_param([sys,'/','乘法器/in_1'],...
		'position',[15,25,35,45])
add_line([sys,'/','乘法器'],[40,100;60,70])
add_line([sys,'/','乘法器'],[40,35;60,60])
add_line([sys,'/','乘法器'],[95,65;120,65])
add_line([sys,'/','乘法器'],[150,65;180,65])
set_param([sys,'/','乘法器'],...
		'Mask Display','X',...
		'Mask Type','Dot Product',...
		'Mask Dialogue','Inner (dot) product.\ny=sum(u1.*u2)')
set_param([sys,'/','乘法器'],...
		'Mask Help','Computes the inner (dot) product of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Output is a scalar.')


%     Finished composite block '乘法器'.

set_param([sys,'/','乘法器'],...
		'Font Name','Arial',...
		'Font Size',11,...
		'position',[320,204,340,226])

add_block('built-in/Zero-Pole',[sys,'/',['巴特沃斯',13,'低通滤波器1']])
set_param([sys,'/',['巴特沃斯',13,'低通滤波器1']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Zeros','z',...
		'Poles','p',...
		'Gain','k',...
		'Mask Display','plot(20*log10(w),20*log10(abs(h)))',...
		'Mask Type','buttap')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器1']],...
		'Mask Dialogue','Analog Butterworth low pass filter.\n\n(Requires Signal Processing Toolbox)|Cutoff frequency (rad/sec)|Order')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器1']],...
		'Mask Translate','[z,p,k]=buttap(@2); z=@1*z; p=@1*p; k=real(prod(-p)); [num,den]=zp2tf(z,p,k); w=logspace(log10(@1/10),log10(10*@1),20); h=freqs(num,den,w); ')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器1']],...
		'Mask Help','Butterworth low pass filter using MATLAB''s butter command.',...
		'Mask Entries','60\/4\/',...
		'position',[175,118,235,162])

add_block('built-in/To Workspace',[sys,'/','环境变量3'])
set_param([sys,'/','环境变量3'],...
		'Font Name','Arial',...
		'Font Size',11,...
		'mat-name','chou_shi_z3',...
		'buffer','[4096;1;0.001]',...
		'position',[515,127,565,143])

add_block('built-in/To Workspace',[sys,'/','环境变量4'])
set_param([sys,'/','环境变量4'],...
		'Font Name','Arial',...
		'Font Size',11,...
		'mat-name','chou_shi_z4',...
		'buffer','[4096;1;0.001]',...
		'position',[515,162,565,178])

add_block('built-in/Zero-Pole',[sys,'/',['巴特沃斯',13,'低通滤波器2']])
set_param([sys,'/',['巴特沃斯',13,'低通滤波器2']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Zeros','z',...
		'Poles','p',...
		'Gain','k',...
		'Mask Display','plot(20*log10(w),20*log10(abs(h)))',...
		'Mask Type','buttap')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器2']],...
		'Mask Dialogue','Analog Butterworth low pass filter.\n\n(Requires Signal Processing Toolbox)|Cutoff frequency (rad/sec)|Order')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器2']],...
		'Mask Translate','[z,p,k]=buttap(@2); z=@1*z; p=@1*p; k=real(prod(-p)); [num,den]=zp2tf(z,p,k); w=logspace(log10(@1/10),log10(10*@1),20); h=freqs(num,den,w); ')
set_param([sys,'/',['巴特沃斯',13,'低通滤波器2']],...
		'Mask Help','Butterworth low pass filter using MATLAB''s butter command.',...
		'Mask Entries','60\/4\/',...
		'position',[410,193,470,237])

add_block('built-in/To Workspace',[sys,'/','环境变量1'])
set_param([sys,'/','环境变量1'],...
		'Font Name','Arial',...
		'Font Size',11,...
		'mat-name','chou_shi_z1',...
		'buffer','[4096;1;0.001]',...
		'position',[515,57,565,73])

add_block('built-in/Scope',[sys,'/',['示波器',13,'（滤波后信号）',13,'']])
set_param([sys,'/',['示波器',13,'（滤波后信号）',13,'']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Vgain','4.000000',...
		'Hgain','3.000000',...
		'Vmax','8.000000',...
		'Hmax','6.000000',...
		'Window',[112,84,445,397])
set_param([sys,'/',['示波器',13,'（滤波后信号）',13,'']],...
		'position',[310,122,340,158])

add_block('built-in/Signal Generator',[sys,'/',['信号源',13,'（输入信号）',13,'',13,'']])
set_param([sys,'/',['信号源',13,'（输入信号）',13,'',13,'']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Peak','2.000000',...
		'Peak Range','5.000000',...
		'Freq','6.000000',...
		'Freq Range','50.000000',...
		'Wave','Sin')
set_param([sys,'/',['信号源',13,'（输入信号）',13,'',13,'']],...
		'Units','Rads',...
		'position',[55,121,100,159])

add_block('built-in/To Workspace',[sys,'/','环境变量2'])
set_param([sys,'/','环境变量2'],...
		'Font Name','Arial',...
		'Font Size',11,...
		'mat-name','chou_shi_z2',...
		'buffer','[4096;1;0.001]',...
		'position',[515,92,565,108])

add_block('built-in/Scope',[sys,'/',['示波器',13,'（恢复信号）']])
set_param([sys,'/',['示波器',13,'（恢复信号）']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Vgain','1.000000',...
		'Hgain','3.000000',...
		'Vmax','2.000000',...
		'Hmax','6.000000',...
		'Window',[175,82,507,402])
set_param([sys,'/',['示波器',13,'（恢复信号）']],...
		'position',[525,197,555,233])

add_block('built-in/Clock',[sys,'/',['时钟',13,'']])
set_param([sys,'/',['时钟',13,'']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'position',[365,343,385,367])

add_block('built-in/To Workspace',[sys,'/',['时间变量',13,'']])
set_param([sys,'/',['时间变量',13,'']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'mat-name','chou_shi_t',...
		'buffer','[4096;1;0.001]',...
		'position',[490,347,540,363])

add_block('built-in/Scope',[sys,'/',['示波器',13,'（抽样后信号）']])
set_param([sys,'/',['示波器',13,'（抽样后信号）']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Vgain','14.000000',...
		'Hgain','3.000000',...
		'Vmax','28.000000',...
		'Hmax','6.000000',...
		'Window',[143,80,473,402])
set_param([sys,'/',['示波器',13,'（抽样后信号）']],...
		'position',[425,277,455,313])

add_block('built-in/Scope',[sys,'/',['示波器',13,'（输入信号）']])
set_param([sys,'/',['示波器',13,'（输入信号）']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Vgain','4.000000',...
		'Hgain','3.000000',...
		'Vmax','8.000000',...
		'Hmax','6.000000',...
		'Window',[3,76,331,387])
set_param([sys,'/',['示波器',13,'（输入信号）']],...
		'position',[190,207,220,243])

add_block('built-in/Scope',[sys,'/',['示波器',13,'（抽样脉冲信号）']])
set_param([sys,'/',['示波器',13,'（抽样脉冲信号）']],...
		'Font Name','Arial',...
		'Font Size',11,...
		'Vgain','8.000000',...
		'Hgain','1.000000',...
		'Vmax','16.000000',...
		'Hmax','2.000000',...
		'Window',[50,70,385,389])
set_param([sys,'/',['示波器',13,'（抽样脉冲信号）']],...
		'position',[190,286,220,324])
add_line(sys,[105,275;275,275;275,220;315,220])
add_line(sys,[345,215;405,215])
add_line(sys,[475,215;520,215])
add_line(sys,[105,140;120,140;120,225;185,225])
add_line(sys,[375,215;375,295;420,295])
add_line(sys,[140,275;140,305;185,305])
add_line(sys,[495,215;495,170;510,170])
add_line(sys,[375,215;375,135;510,135])
add_line(sys,[390,355;485,355])
add_line(sys,[120,140;120,65;510,65])
add_line(sys,[120,140;170,140])
add_line(sys,[240,140;275,140;275,210;315,210])
add_line(sys,[275,140;305,140])
add_line(sys,[275,140;275,100;510,100])

drawnow

% Return any arguments.
if (nargin | nargout)
	% Must use feval here to access system in memory
	if (nargin > 3)
		if (flag == 0)
			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])
		else
			eval(['ret =', sys,'(t,x,u,flag);'])
		end
	else
		[ret,x0,str,ts,xts] = feval(sys);
	end
else
	drawnow % Flash up the model and execute load callback
end

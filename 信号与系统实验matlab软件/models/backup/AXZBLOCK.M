function [ret,x0,str,ts,xts]=axzblock(t,x,u,flag);
%AXZBLOCK	is the M-file description of the SIMULINK system named AXZBLOCK.
%	The block-diagram can be displayed by typing: AXZBLOCK.
%
%	SYS=AXZBLOCK(T,X,U,FLAG) returns depending on FLAG certain
%	system values given time point, T, current state vector, X,
%	and input vector, U.
%	FLAG is used to indicate the type of output to be returned in SYS.
%
%	Setting FLAG=1 causes AXZBLOCK to return state derivatives, FLAG=2
%	discrete states, FLAG=3 system outputs and FLAG=4 next sample
%	time. For more information and other options see SFUNC.
%
%	Calling AXZBLOCK with a FLAG of zero:
%	[SIZES]=AXZBLOCK([],[],[],0),  returns a vector, SIZES, which
%	contains the sizes of the state vector and other parameters.
%		SIZES(1) number of states
%		SIZES(2) number of discrete states
%		SIZES(3) number of outputs
%		SIZES(4) number of inputs
%		SIZES(5) number of roots (currently unsupported)
%		SIZES(6) direct feedthrough flag
%		SIZES(7) number of sample times
%
%	For the definition of other parameters in SIZES, see SFUNC.
%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.

% Note: This M-file is only used for saving graphical information;
%       after the model is loaded into memory an internal model
%       representation is used.

% the system will take on the name of this mfile:
sys = mfilename;
new_system(sys)
simver(1.3)
if (0 == (nargin + nargout))
     set_param(sys,'Location',[84,38,595,437])
     open_system(sys)
end;
set_param(sys,'algorithm',     'RK-45')
set_param(sys,'Start time',    '0.0')
set_param(sys,'Stop time',     '999999')
set_param(sys,'Min step size', '0.0001')
set_param(sys,'Max step size', '10')
set_param(sys,'Relative error','1e-3')
set_param(sys,'Return vars',   '')

add_block('built-in/Scope',[sys,'/','示波器'])
set_param([sys,'/','示波器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Vgain','1.000000',...
		'Hgain','1.000000',...
		'Vmax','2.000000',...
		'Hmax','2.000000',...
		'Window',[100,100,380,320],...
		'position',[35,102,55,128])

add_block('built-in/Signal Generator',[sys,'/','信号发生器'])
set_param([sys,'/','信号发生器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Peak','1.000000',...
		'Peak Range','5.000000',...
		'Freq','1.000000',...
		'Freq Range','5.000000',...
		'Wave','Sin',...
		'Units','Rads')
set_param([sys,'/','信号发生器'],...
		'position',[20,38,65,72])

add_block('built-in/Note',[sys,'/','最常用的模块：'])
set_param([sys,'/','最常用的模块：'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[56,6,61,11])

add_block('built-in/Gain',[sys,'/','增益'])
set_param([sys,'/','增益'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[110,45,130,65])

add_block('built-in/Note',[sys,'/','其它常用模块：'])
set_param([sys,'/','其它常用模块：'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[56,161,61,166])

add_block('built-in/Sum',[sys,'/','加法器'])
set_param([sys,'/','加法器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[110,105,130,125])

add_block('built-in/Transfer Fcn',[sys,'/','传递函数'])
set_param([sys,'/','传递函数'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Denominator','[1 0]',...
		'position',[185,37,220,73])

add_block('built-in/Fcn',[sys,'/','函数'])
set_param([sys,'/','函数'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[185,110,225,130])

add_block('built-in/Discrete Transfer Fcn',[sys,'/','离散传递函数'])
set_param([sys,'/','离散传递函数'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Denominator','[1 0]',...
		'position',[280,102,325,138])


%     Subsystem  ['自动调整',13,'示波器'].

new_system([sys,'/',['自动调整',13,'示波器']])
set_param([sys,'/',['自动调整',13,'示波器']],'Location',[0,59,274,252])

add_block('built-in/S-Function',[sys,'/',['自动调整',13,'示波器/S-function',13,'M-file which plots',13,'lines',13,'']])
set_param([sys,'/',['自动调整',13,'示波器/S-function',13,'M-file which plots',13,'lines',13,'']],...
		'function name','sfunyst',...
		'parameters','ax, color, npts, dt',...
		'position',[130,55,180,75])

add_block('built-in/Inport',[sys,'/',['自动调整',13,'示波器/x']])
set_param([sys,'/',['自动调整',13,'示波器/x']],...
		'position',[65,55,85,75])
add_line([sys,'/',['自动调整',13,'示波器']],[90,65;125,65])
set_param([sys,'/',['自动调整',13,'示波器']],...
		'Mask Display','plot(0,0,100,100,[83,76,63,52,42,38,28,16,11,84,11,11,11,90,90,11],[75,58,47,54,72,80,84,74,65,65,65,90,40,40,90,90])',...
		'Mask Type','Storage scope.')
set_param([sys,'/',['自动调整',13,'示波器']],...
		'Mask Dialogue','Storage scope using MATLAB graph window.\nEnter plotting ranges and line type.|Initial Time Range:|Initial y-min:|Initial y-max:|Storage pts.:|Line type (rgbw-.:xo):|Sample time:')
set_param([sys,'/',['自动调整',13,'示波器']],...
		'Mask Translate','npts = @4; color = @5; ax = [0, @1, @2, @3]; dt=@6;')
set_param([sys,'/',['自动调整',13,'示波器']],...
		'Mask Help','Uses MATLAB''s graph window.\nUse only one block per system.\nLine type must be in quotes.\nSee the M-file sfunyst.m.')
set_param([sys,'/',['自动调整',13,'示波器']],...
		'Mask Entries','5\/-10\/10\/200\/''y-/g--/c-./w:/m*/ro/b+''\/.1\/')


%     Finished composite block ['自动调整',13,'示波器'].

set_param([sys,'/',['自动调整',13,'示波器']],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[285,30,315,70])


%     Subsystem  ['XY 二维',13,'示波器'].

new_system([sys,'/',['XY 二维',13,'示波器']])
set_param([sys,'/',['XY 二维',13,'示波器']],'Location',[0,0,274,193])

add_block('built-in/S-Function',[sys,'/',['XY 二维',13,'示波器/S-function',13,'M-file which plots',13,'lines',13,'']])
set_param([sys,'/',['XY 二维',13,'示波器/S-function',13,'M-file which plots',13,'lines',13,'']],...
		'function name','sfunxy',...
		'parameters','ax',...
		'position',[185,70,235,90])

add_block('built-in/Mux',[sys,'/',['XY 二维',13,'示波器/Mux']])
set_param([sys,'/',['XY 二维',13,'示波器/Mux']],...
		'inputs','2',...
		'position',[100,61,130,94])

add_block('built-in/Inport',[sys,'/',['XY 二维',13,'示波器/x']])
set_param([sys,'/',['XY 二维',13,'示波器/x']],...
		'position',[10,30,30,50])

add_block('built-in/Inport',[sys,'/',['XY 二维',13,'示波器/y']])
set_param([sys,'/',['XY 二维',13,'示波器/y']],...
		'Port','2',...
		'position',[10,100,30,120])
add_line([sys,'/',['XY 二维',13,'示波器']],[135,80;180,80])
add_line([sys,'/',['XY 二维',13,'示波器']],[35,40;70,40;70,70;95,70])
add_line([sys,'/',['XY 二维',13,'示波器']],[35,110;70,110;70,85;95,85])
set_param([sys,'/',['XY 二维',13,'示波器']],...
		'Mask Display','plot(0,0,100,100,[12,91,91,12,12],[90,90,45,45,90],[51,57,65,75,80,79,75,67,60,54,51,48,42,34,28,27,31,42,51],[71,68,66,66,72,79,83,84,81,77,71,60,54,54,58,65,71,74,71])')
set_param([sys,'/',['XY 二维',13,'示波器']],...
		'Mask Type','XY scope.',...
		'Mask Dialogue','XY scope using MATLAB graph window.\nFirst input is used as time base.\nEnter plotting ranges.|x-min|x-max|y-min|y-max')
set_param([sys,'/',['XY 二维',13,'示波器']],...
		'Mask Translate','ax = [@1, @2, @3, @4];',...
		'Mask Help','This block can be used to explore limit cycles. Look at the m-file sfunxy.m to see how it works.')
set_param([sys,'/',['XY 二维',13,'示波器']],...
		'Mask Entries','-10\/10\/-10\/10\/')


%     Finished composite block ['XY 二维',13,'示波器'].

set_param([sys,'/',['XY 二维',13,'示波器']],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[380,31,410,69])

add_block('built-in/Derivative',[sys,'/','微分'])
set_param([sys,'/','微分'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[20,194,60,226])

add_block('built-in/Constant',[sys,'/','常量'])
set_param([sys,'/','常量'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[450,200,470,220])

add_block('built-in/Rate Limiter',[sys,'/','比率限制器'])
set_param([sys,'/','比率限制器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[445,260,470,280])

add_block('built-in/Unit Delay',[sys,'/','单位延迟'])
set_param([sys,'/','单位延迟'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[370,337,420,353])

add_block('built-in/Switch',[sys,'/','开关'])
set_param([sys,'/','开关'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[465,329,490,361])

add_block('built-in/Discrete State-Space',[sys,'/','离散状态空间'])
set_param([sys,'/','离散状态空间'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[15,321,145,369])

add_block('built-in/Filter',[sys,'/','滤波器'])
set_param([sys,'/','滤波器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Denominator','[1 2]',...
		'position',[280,326,335,364])

add_block('built-in/Discrete Zero-Pole',[sys,'/','离散零极点表达式'])
set_param([sys,'/','离散零极点表达式'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Poles','[0; 0.5]',...
		'position',[185,328,245,362])

add_block('built-in/Sine Wave',[sys,'/','正弦波'])
set_param([sys,'/','正弦波'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[95,260,115,280])

add_block('built-in/Step Fcn',[sys,'/','阶跃输入'])
set_param([sys,'/','阶跃输入'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[30,260,50,280])

add_block('built-in/Saturation',[sys,'/','限幅器'])
set_param([sys,'/','限幅器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[375,260,400,280])

add_block('built-in/Look Up Table',[sys,'/','查找表'])
set_param([sys,'/','查找表'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[310,260,335,280])

add_block('built-in/Product',[sys,'/','乘法器'])
set_param([sys,'/','乘法器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[245,260,270,280])

add_block('built-in/Transport Delay',[sys,'/','传输延迟'])
set_param([sys,'/','传输延迟'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Delay Time','1',...
		'position',[160,255,205,285])

add_block('built-in/Integrator',[sys,'/','积分'])
set_param([sys,'/','积分'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[380,197,415,223])


%     Subsystem  'PID 控制器'.

new_system([sys,'/','PID 控制器'])
set_param([sys,'/','PID 控制器'],'Location',[0,0,362,244])

add_block('built-in/Inport',[sys,'/','PID 控制器/In_1'])
set_param([sys,'/','PID 控制器/In_1'],...
		'position',[25,65,45,85])

add_block('built-in/Outport',[sys,'/','PID 控制器/Out_1'])
set_param([sys,'/','PID 控制器/Out_1'],...
		'position',[290,65,310,85])

add_block('built-in/Derivative',[sys,'/','PID 控制器/Derivative'])
set_param([sys,'/','PID 控制器/Derivative'],...
		'position',[150,128,190,152])

add_block('built-in/Transfer Fcn',[sys,'/','PID 控制器/Integral'])
set_param([sys,'/','PID 控制器/Integral'],...
		'Numerator','[I]',...
		'Denominator','[1 0]',...
		'position',[110,57,145,93])

add_block('built-in/Gain',[sys,'/','PID 控制器/Proportional'])
set_param([sys,'/','PID 控制器/Proportional'],...
		'Gain','P',...
		'position',[120,13,140,37])

add_block('built-in/Gain',[sys,'/','PID 控制器/D'])
set_param([sys,'/','PID 控制器/D'],...
		'Gain','D',...
		'position',[95,129,115,151])

add_block('built-in/Sum',[sys,'/','PID 控制器/Sum'])
set_param([sys,'/','PID 控制器/Sum'],...
		'inputs','+++',...
		'position',[245,57,265,93])
add_line([sys,'/','PID 控制器'],[145,25;210,25;210,65;240,65])
add_line([sys,'/','PID 控制器'],[150,75;240,75])
add_line([sys,'/','PID 控制器'],[195,140;215,140;215,85;240,85])
add_line([sys,'/','PID 控制器'],[50,75;105,75])
add_line([sys,'/','PID 控制器'],[80,75;80,25;115,25])
add_line([sys,'/','PID 控制器'],[65,75;65,140;90,140])
add_line([sys,'/','PID 控制器'],[270,75;285,75])
add_line([sys,'/','PID 控制器'],[120,140;145,140])
set_param([sys,'/','PID 控制器'],...
		'Mask Display','PID',...
		'Mask Type','PID Controller',...
		'Mask Dialogue','Enter expressions for proportional, integral, and derivative terms.\nP+I/s+Ds|Proportional:|Integral|Derivative:')
set_param([sys,'/','PID 控制器'],...
		'Mask Translate','P=@1; I=@2; D=@3;')
set_param([sys,'/','PID 控制器'],...
		'Mask Help','This block implements a PID controller where parameters are entered for the Proportional, Integral and Derivative terms. Unmask this block to see how it works. The derivative term is implemented using a true derivative block.')
set_param([sys,'/','PID 控制器'],...
		'Mask Entries','1\/1\/0\/')


%     Finished composite block 'PID 控制器'.

set_param([sys,'/','PID 控制器'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[305,194,345,226])

add_block('built-in/State-Space',[sys,'/','状态空间'])
set_param([sys,'/','状态空间'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'position',[185,192,265,228])

add_block('built-in/Zero-Pole',[sys,'/','零极点表达式'])
set_param([sys,'/','零极点表达式'],...
		'Font Name','宋体',...
		'Font Size',12,...
		'Poles','[0; -1]',...
		'position',[100,192,145,228])

drawnow

% Return any arguments.
if (nargin | nargout)
	% Must use feval here to access system in memory
	if (nargin > 3)
		if (flag == 0)
			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])
		else
			eval(['ret =', sys,'(t,x,u,flag);'])
		end
	else
		[ret,x0,str,ts,xts] = feval(sys);
	end
else
	drawnow % Flash up the model and execute load callback
end
